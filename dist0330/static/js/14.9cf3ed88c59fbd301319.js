webpackJsonp([14],{"/H/w":function(t,a){},KNlY:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Edqs"),n=e.n(s),i=e("34v0"),l=e.n(i),o={data:function(){var t=this;return{btn:["ghost","default"],params:{is_active:"1",keyword:"",second_agent:"",code:[],points:""},brandList:[],seriesList:[],modelList:[],columns:[{type:"selection",width:60},{title:"代理商/所属社区",key:"second",render:function(t,a){return t("span",{},a.row.second&&a.row.second.realname+"/"+a.row.second.phone)}},{title:"账号",key:"username"},{title:"姓名",key:"realname"},{title:"手机号",key:"phone"},{title:"状态",key:"online",width:100,render:function(t,a){return t("span",{},{1:"在线",2:"离线"}[a.row.online])}},{title:"加入时间",key:"ctime",width:150,render:function(t,a){return t("span",{},new Date(1e3*a.row.ctime).Format("yyyy-MM-dd hh:mm"))}},{title:"详细地址",key:"address"},{title:"订单总数",key:"total_order_num",render:function(t,a){return t("span",{},a.row.extend&&a.row.extend.total_order_num)}},{title:"评分",key:"total_points",render:function(t,a){return t("span",{},a.row.extend&&a.row.extend.total_points)}},{title:"操作",width:100,key:"operation",render:function(a,e){return a("div",[a("span",{class:"span-active",on:{click:function(){t.handleDetail(e.row)}}},{1:"评价详情",2:"身份证"}[t.params.is_active])])}}],itemId:0,modal1:!1,firstList:[],secondList:[],formData:{second_id:""},rule:{},modal2:!1,detail:{remain_money:"",month_salary:"",device_num:"",new_device_num:"",month_order_num:"",month_points:0,month_star_info:{},month_comments_info:{},total_salary:"",total_order_num:"",total_points:0,total_star_info:{},total_comments_info:{}},modal3:!1,detail3:{idcard_front:"",idcard_back:""}}},computed:{modelTitle:function(){return this.itemId?"编辑":"新增"}},mounted:function(){this.getSecondLevel()},methods:{handleBtn:function(t){this.btn=["default","default"],this.btn[t]="ghost",0==t&&(this.params=l()({},this.params,{is_active:1})),1==t&&(this.params=l()({},this.params,{is_active:2}))},getSecondLevel:function(){var t=this;this.$post("agent/second-level",{page:0}).then(function(a){t.secondList=a.data})},areaChange:function(t){1==t.length&&(this.params.province=t[0]),2==t.length&&(this.params.province=t[0],this.params.city=t[1]),3==t.length&&(this.params.province=t[0],this.params.city=t[1],this.params.district=t[2])},handleAdd:function(){this.modal1=!0,this.itemId=0,this.$refs.form.resetFields()},handleSubmit:function(){var t=this,a=this.$refs.table.getSelect();a.length>0?this.$post("employee/change-agent",{agent_id:this.formData.second_id,ids:a.join()}).then(function(a){t.$Message.success("更换成功"),t.modal1=!1,t.handleSearch()}):this.$Message.warning("请选择至少一项")},handleDetail:function(t){1==this.params.is_active?(this.modal2=!0,this.detail=n()({},t.extend),this.detail.month_points=parseFloat(t.extend.month_points)/2,this.detail.total_points=parseFloat(t.extend.total_points)/2,console.log(this.detail)):(this.modal3=!0,this.detail3=n()({},t))},handleExport:function(){var t=this;this.$Modal.confirm({title:"温馨提示",content:"确定导出数据 ?",onOk:function(){t.$post("finance/list",l()({},t.params,{export:1})).then(function(t){window.location.href=t.data.filename})},onCancel:function(){}})}}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"dt-search-top"},[e("ButtonGroup",[e("Button",{attrs:{type:t.btn[0]},on:{click:function(a){t.handleBtn(0)}}},[t._v("正式小二")]),t._v(" "),e("Button",{attrs:{type:t.btn[1]},on:{click:function(a){t.handleBtn(1)}}},[t._v("待审批小二")])],1)],1),t._v(" "),e("div",{staticClass:"dt-search-top"},[e("div",{staticClass:"dt-search-cells"},[e("div",{staticClass:"dt-search-cell"},[e("Input",{staticClass:"dt-search-input",staticStyle:{width:"350px"},attrs:{placeholder:"账号、姓名、手机号、详细地址"},model:{value:t.params.keyword,callback:function(a){t.$set(t.params,"keyword",a)},expression:"params.keyword"}})],1),t._v(" "),e("div",{staticClass:"dt-search-cell"},[t._v("\n        代理商：\n        "),e("Select",{staticClass:"dt-search-select",model:{value:t.params.second_agent,callback:function(a){t.$set(t.params,"second_agent",a)},expression:"params.second_agent"}},[e("Option",{key:"-1",attrs:{value:"0"}},[t._v("全部")]),t._v(" "),t._l(t.secondList,function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.realname)+"/"+t._s(a.phone))])})],2)],1),t._v(" "),e("div",{staticClass:"dt-search-cell"},[t._v("\n        省市区："),e("al-selector",{staticClass:"dt-search-area",attrs:{"data-type":"name",level:"2"},on:{"on-change":t.areaChange},model:{value:t.params.code,callback:function(a){t.$set(t.params,"code",a)},expression:"params.code"}})],1),t._v(" "),1==t.params.is_active?e("div",{staticClass:"dt-search-cell"},[t._v("\n        评分小于："),e("Input",{staticClass:"dt-search-input",attrs:{placeholder:"评分值"},model:{value:t.params.points,callback:function(a){t.$set(t.params,"points",a)},expression:"params.points"}})],1):t._e()]),t._v(" "),e("div",{staticClass:"dt-search-operation"},[e("Button",{attrs:{type:"ghost"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),e("Button",{attrs:{type:"success"},on:{click:t.handleAdd}},[t._v("更换二级代理商")])],1)]),t._v(" "),e("dt-table",{ref:"table",attrs:{url:"employee/list",params:t.params,columns:t.columns}}),t._v(" "),e("Modal",{attrs:{title:"更换二级代理商","mask-closable":!1},model:{value:t.modal1,callback:function(a){t.modal1=a},expression:"modal1"}},[e("Form",{ref:"form",attrs:{model:t.formData,rules:t.rule,"label-width":100}},[e("FormItem",{attrs:{label:"二级代理商",prop:"second_id"}},[e("Select",{model:{value:t.formData.second_id,callback:function(a){t.$set(t.formData,"second_id",a)},expression:"formData.second_id"}},t._l(t.secondList,function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.realname)+"/"+t._s(a.phone))])}))],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"ghost"},on:{click:function(a){t.handleSubmit()}}},[t._v("保存")]),t._v(" "),e("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(a){t.modal1=!1}}},[t._v("取消")])],1)],1),t._v(" "),e("Modal",{attrs:{title:"评价详情","mask-closable":!1,width:"650"},model:{value:t.modal2,callback:function(a){t.modal2=a},expression:"modal2"}},[e("Row",{attrs:{gutter:40}},[e("Col",{attrs:{span:"12"}},[e("h2",{staticClass:"title"},[t._v("月度评价")]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("订单数")]),e("span",[t._v(t._s(t.detail.month_order_num)+"单")])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("综合评分")]),e("span",[e("Rate",{attrs:{"allow-half":"",disabled:""},model:{value:t.detail.month_points,callback:function(a){t.$set(t.detail,"month_points",a)},expression:"detail.month_points"}})],1)]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("评分统计")]),e("span")]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:5}})],1),e("span",[t._v(t._s(t.detail.month_star_info[5]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:4}})],1),e("span",[t._v(t._s(t.detail.month_star_info[4]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:3}})],1),e("span",[t._v(t._s(t.detail.month_star_info[3]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:2}})],1),e("span",[t._v(t._s(t.detail.month_star_info[2]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:1}})],1),e("span",[t._v(t._s(t.detail.month_star_info[1]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("评分字条")]),e("span")]),t._v(" "),e("div",t._l(t.detail.month_comments_info,function(a,s){return e("span",{staticClass:"btn"},[t._v(t._s(s)+" "+t._s(a))])}))]),t._v(" "),e("Col",{attrs:{span:"12"}},[e("h2",{staticClass:"title"},[t._v("整体评价")]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("订单数")]),e("span",[t._v(t._s(t.detail.total_order_num)+"单")])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("综合评分")]),e("span",[e("Rate",{attrs:{"allow-half":"",disabled:""},model:{value:t.detail.total_points,callback:function(a){t.$set(t.detail,"total_points",a)},expression:"detail.total_points"}})],1)]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("评分统计")]),e("span")]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:5}})],1),e("span",[t._v(t._s(t.detail.total_star_info[5]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:4}})],1),e("span",[t._v(t._s(t.detail.total_star_info[4]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:3}})],1),e("span",[t._v(t._s(t.detail.total_star_info[3]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:2}})],1),e("span",[t._v(t._s(t.detail.total_star_info[2]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[e("Rate",{attrs:{disabled:"",value:1}})],1),e("span",[t._v(t._s(t.detail.total_star_info[1]))])]),t._v(" "),e("div",{staticClass:"cell"},[e("span",[t._v("评分字条")]),e("span")]),t._v(" "),e("div",t._l(t.detail.total_comments_info,function(a,s){return e("span",{staticClass:"btn"},[t._v(t._s(s)+" "+t._s(a))])}))])],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(a){t.modal2=!1}}},[t._v("取消")])],1)],1),t._v(" "),e("Modal",{attrs:{title:"身份证","mask-closable":!1},model:{value:t.modal3,callback:function(a){t.modal3=a},expression:"modal3"}},[e("div",{staticStyle:{"text-align":"center"}},[e("img",{attrs:{src:t.detail3.idcard_front,height:"200px"}}),t._v(" "),e("img",{attrs:{src:t.detail3.idcard_back,height:"200px"}})]),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(a){t.modal3=!1}}},[t._v("取消")])],1)])],1)},staticRenderFns:[]};var r=e("Mz/3")(o,d,!1,function(t){e("/H/w")},"data-v-6382a9b8",null);a.default=r.exports}});
//# sourceMappingURL=14.9cf3ed88c59fbd301319.js.map