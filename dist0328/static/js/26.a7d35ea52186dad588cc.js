webpackJsonp([26],{qXZl:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("34v0"),n=s.n(a),i={data:function(){return{params:{keyword:"",first_agent:"",second_agent:"",brand:"",series:"",model:"",code:[]},brandList:[],seriesList:[],modelList:[],columns:[{type:"selection",width:60},{title:"一级代理商",key:"first",width:150,render:function(t,e){return t("span",{},e.row.first&&e.row.first.realname+"/"+e.row.first.phone)}},{title:"二级代理商",key:"second",width:150,render:function(t,e){return t("span",{},e.row.second&&e.row.second.realname+"/"+e.row.second.phone)}},{title:"设备MAC",key:"mac",width:150},{title:"设备名称",key:"name",width:150},{title:"通讯方式",key:"connect_type",width:150},{title:"系列",key:"series",width:150},{title:"型号",key:"model",width:150},{title:"套餐状态",key:"expire_time",width:150},{title:"总套餐",key:"expire_time",width:150},{title:"地址",key:"address",width:150},{title:"姓名",key:"nickname",width:150},{title:"手机号码",key:"phone",width:150},{title:"激活日期",key:"ctime",width:150,render:function(t,e){return t("span",{},new Date(1e3*e.row.ctime).Format("yyyy-MM-dd hh:mm"))}}],itemId:0,modal1:!1,firstList:[],secondList:[],formData:{second_id:""},rule:{}}},computed:{modelTitle:function(){return this.itemId?"编辑":"新增"}},mounted:function(){this.getFirstLevel(),this.getSecondLevel(),this.getBrand(),this.getSeries(),this.getModel()},methods:{getFirstLevel:function(){var t=this;this.$post("agent/first-level",{page:0}).then(function(e){t.firstList=e.data})},getSecondLevel:function(){var t=this;this.$post("agent/second-level",{page:0}).then(function(e){t.secondList=e.data})},getBrand:function(){var t=this;this.$post("device/brands",{page:0}).then(function(e){t.brandList=e.data})},getSeries:function(){var t=this;this.$post("device/series",{page:0}).then(function(e){t.seriesList=e.data})},getModel:function(){var t=this;this.$post("device/models",{page:0}).then(function(e){t.modelList=e.data})},areaChange:function(t){1==t.length&&(this.params.province=t[0]),2==t.length&&(this.params.province=t[0],this.params.city=t[1]),3==t.length&&(this.params.province=t[0],this.params.city=t[1],this.params.district=t[2])},handleAdd:function(){this.modal1=!0,this.itemId=0,this.$refs.form.resetFields()},handleSubmit:function(){var t=this,e=this.$refs.table.getSelect();e.length>0?this.$post("device/change-agent",{agent_id:this.formData.second_id,ids:e.join()}).then(function(e){t.$Message.success("更换成功"),t.modal1=!1,t.handleSearch()}):this.$Message.warning("请选择至少一项")},handleExport:function(){var t=this;this.$Modal.confirm({title:"温馨提示",content:"确定导出数据 ?",onOk:function(){t.$post("finance/list",n()({},t.params,{export:1})).then(function(t){window.location.href=t.data.filename})},onCancel:function(){}})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"dt-search-top"},[s("div",{staticClass:"dt-search-cells"},[s("div",{staticClass:"dt-search-cell"},[s("Input",{staticClass:"dt-search-input",staticStyle:{width:"350px"},attrs:{placeholder:"MAC、名称、用户名、手机号、详细地址"},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}})],1),t._v(" "),s("div",{staticClass:"dt-search-cell"},[t._v("\n        一级代理商：\n        "),s("Select",{staticClass:"dt-search-select",model:{value:t.params.first_agent,callback:function(e){t.$set(t.params,"first_agent",e)},expression:"params.first_agent"}},[s("Option",{key:"-1",attrs:{value:"0"}},[t._v("全部")]),t._v(" "),t._l(t.firstList,function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.realname)+"/"+t._s(e.phone))])})],2)],1),t._v(" "),s("div",{staticClass:"dt-search-cell"},[t._v("\n        二级代理商：\n        "),s("Select",{staticClass:"dt-search-select",model:{value:t.params.second_agent,callback:function(e){t.$set(t.params,"second_agent",e)},expression:"params.second_agent"}},[s("Option",{key:"-1",attrs:{value:"0"}},[t._v("全部")]),t._v(" "),t._l(t.secondList,function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.realname)+"/"+t._s(e.phone))])})],2)],1),t._v(" "),s("div",{staticClass:"dt-search-cell"},[t._v("\n        品牌：\n        "),s("Select",{staticClass:"dt-search-select",model:{value:t.params.brand,callback:function(e){t.$set(t.params,"brand",e)},expression:"params.brand"}},[s("Option",{key:"-1",attrs:{value:"0"}},[t._v("全部")]),t._v(" "),t._l(t.brandList,function(e){return s("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})],2)],1),t._v(" "),s("div",{staticClass:"dt-search-cell"},[t._v("\n        系列：\n        "),s("Select",{staticClass:"dt-search-select",model:{value:t.params.series,callback:function(e){t.$set(t.params,"series",e)},expression:"params.series"}},[s("Option",{key:"-1",attrs:{value:"0"}},[t._v("全部")]),t._v(" "),t._l(t.seriesList,function(e){return s("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})],2)],1),t._v(" "),s("div",{staticClass:"dt-search-cell"},[t._v("\n        型号：\n        "),s("Select",{staticClass:"dt-search-select",model:{value:t.params.model,callback:function(e){t.$set(t.params,"model",e)},expression:"params.model"}},[s("Option",{key:"-1",attrs:{value:"0"}},[t._v("全部")]),t._v(" "),t._l(t.modelList,function(e){return s("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})],2)],1),t._v(" "),s("div",{staticClass:"dt-search-cell"},[t._v("\n        省市区：\n        "),s("al-selector",{staticClass:"dt-search-area",attrs:{"data-type":"name",level:"2"},on:{"on-change":t.areaChange},model:{value:t.params.code,callback:function(e){t.$set(t.params,"code",e)},expression:"params.code"}})],1)]),t._v(" "),s("div",{staticClass:"dt-search-operation"},[s("Button",{attrs:{type:"ghost"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),s("Button",{attrs:{type:"success"},on:{click:t.handleAdd}},[t._v("更换二级代理商")]),t._v(" "),s("Button",{attrs:{type:"info"},on:{click:t.handleExport}},[t._v("导出")])],1)]),t._v(" "),s("dt-table",{ref:"table",attrs:{url:"device/list",params:t.params,columns:t.columns}}),t._v(" "),s("Modal",{attrs:{title:"更换二级代理商","mask-closable":!1},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[s("Form",{ref:"form",attrs:{model:t.formData,rules:t.rule,"label-width":100}},[s("FormItem",{attrs:{label:"二级代理商",prop:"second_id"}},[s("Select",{model:{value:t.formData.second_id,callback:function(e){t.$set(t.formData,"second_id",e)},expression:"formData.second_id"}},t._l(t.secondList,function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.realname)+"/"+t._s(e.phone))])}))],1)],1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"ghost"},on:{click:function(e){t.handleSubmit()}}},[t._v("保存")]),t._v(" "),s("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){t.modal1=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]},l=s("Mz/3")(i,r,!1,null,null,null);e.default=l.exports}});
//# sourceMappingURL=26.a7d35ea52186dad588cc.js.map