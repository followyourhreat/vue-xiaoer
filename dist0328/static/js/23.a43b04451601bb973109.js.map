{"version":3,"sources":["webpack:///src/pages/4_finance/list.vue","webpack:///./src/pages/4_finance/list.vue?d148","webpack:///./src/pages/4_finance/list.vue"],"names":["list","data","params","keyword","source","agent_level","start_time","end_time","sum","columns","title","key","render","h","1","2","row","3","4","5","6","7","8","width","Date","ctime","Format","itemId","modal1","formData","role_name","rule","menuList","computed","modelTitle","this","mounted","getList","methods","handleDateSelect","val","console","log","_this","$post","then","res","handleAdd","$refs","form","resetFields","handleEdit","item","id","handleSubmit","_this2","checkId","tree","getCheckedNodes","map","url_ids","join","handleSearch","$store","dispatch","handleExport","_this3","$Modal","confirm","content","onOk","extends_default","export","window","location","href","filename","onCancel","__finance_list","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","staticStyle","attrs","placeholder","model","value","callback","$$v","$set","expression","url","on","on-select","type","click","ref","mask-closable","rules","label-width","label","prop","maxlength","height","overflow-y","border","show-checkbox","slot","$event","margin-left","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/23.a43b04451601bb973109.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"dt-search-top\">\r\n      <h2>分润金额： {{sum}}</h2>\r\n    </div>\r\n    <div class=\"dt-search-top\">\r\n      <div class=\"dt-search-cells\">\r\n        <div class=\"dt-search-cell\">\r\n          <Input\r\n            v-model=\"params.keyword\"\r\n            class=\"dt-search-input\"\r\n            style=\"width: 350px\"\r\n            placeholder=\"分润单号、代理商姓名、代理商账号、代理商手机\"\r\n          />\r\n        </div>\r\n        <div class=\"dt-search-cell\">\r\n          分润来源：\r\n          <dt-select v-model=\"params.source\" class=\"dt-search-select\" url=\"financeSource\"/>\r\n        </div>\r\n        <div class=\"dt-search-cell\">\r\n          等级：\r\n          <dt-select v-model=\"params.agent_level\" class=\"dt-search-select\" url=\"userLevel\"/>\r\n        </div>\r\n        <div class=\"dt-search-cell\">\r\n          分润时间：\r\n          <dt-selectDate class=\"dt-search-date\" @on-select=\"handleDateSelect\"/>\r\n        </div>\r\n      </div>\r\n      <div class=\"dt-search-operation\">\r\n        <Button type=\"ghost\" @click=\"handleSearch\">查询</Button>\r\n        <Button type=\"info\" @click=\"handleExport\">导出</Button>\r\n      </div>\r\n    </div>\r\n    <dt-table ref=\"table\" url=\"profit/list\" :params=\"params\" :columns=\"columns\"></dt-table>\r\n    <Modal v-model=\"modal1\" :title=\"modelTitle\" :mask-closable=\"false\">\r\n      <Form ref=\"form\" :model=\"formData\" :rules=\"rule\" :label-width=\"100\">\r\n        <FormItem label=\"角色名称\" prop=\"role_name\">\r\n          <Input v-model=\"formData.role_name\" placeholder=\"请输入角色名称\" :maxlength=\"10\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"角色权限\" prop=\"form2\">\r\n          <div style=\"height: 300px;overflow-y: auto;border: 1px solid #dddee1;\">\r\n            <Tree ref=\"tree\" :data=\"menuList\" show-checkbox></Tree>\r\n          </div>\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"ghost\" @click=\"handleSubmit()\">保存</Button>\r\n        <Button type=\"text\" @click=\"modal1 = false\" style=\"margin-left: 8px\">取消</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      params: {\r\n        keyword: \"\",\r\n        source: \"\",\r\n        agent_level: \"\",\r\n        start_time: \"\",\r\n        end_time: \"\"\r\n      },\r\n      sum: null,\r\n      columns: [\r\n        { title: \"分润单号\", key: \"order_num\" },\r\n        {\r\n          title: \"代理商级别\",\r\n          key: \"agent_level\",\r\n          render: (h, params) => {\r\n            const obj = { \"1\": \"一级\", \"2\": \"二级\" };\r\n            const label = obj[params.row.agent_level];\r\n            return h(\"span\", {}, label);\r\n          }\r\n        },\r\n        { title: \"代理商姓名\", key: \"realname\" },\r\n        { title: \"代理商账号\", key: \"username\" },\r\n        { title: \"代理商手机\", key: \"phone\" },\r\n        { title: \"分润金额\", key: \"amount\" },\r\n        {\r\n          title: \"分润来源\",\r\n          key: \"source\",\r\n          render: (h, params) => {\r\n            // const label = this.$filter.financeSourceFilter(params.row.source)\r\n            const obj = {\r\n              \"1\": \"推广费用\",\r\n              \"2\": \"装机费用\",\r\n              \"3\": \"售后服务费用\",\r\n              \"4\": \"续费费用\",\r\n              \"5\": \"达标奖励\",\r\n              \"6\": \"好评返现\",\r\n              \"7\": \"延期罚款\",\r\n              \"8\": \"差评罚款\"\r\n            };\r\n            const label = obj[params.row.source];\r\n            return h(\"span\", {}, label);\r\n          }\r\n        },\r\n        {\r\n          title: \"分润时间\",\r\n          key: \"ctime\",\r\n          width: 150,\r\n          render: (h, params) => {\r\n            const label = new Date(params.row.ctime * 1000).Format(\r\n              \"yyyy-MM-dd hh:mm\"\r\n            );\r\n            return h(\"span\", {}, label);\r\n          }\r\n        }\r\n      ],\r\n      itemId: 0,\r\n      modal1: false,\r\n      formData: {\r\n        role_name: \"\"\r\n      },\r\n      rule: {},\r\n      menuList: []\r\n    };\r\n  },\r\n  computed: {\r\n    modelTitle() {\r\n      return this.itemId ? \"编辑\" : \"新增\";\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    handleDateSelect(val) {\r\n      console.log(val);\r\n      this.params.start_time = val[0];\r\n      this.params.end_time = val[1];\r\n    },\r\n    getList() {\r\n      this.$post(\"profit/list\", this.params).then(res => {\r\n        const data = res.data;\r\n        this.sum = data.sum;\r\n      });\r\n    },\r\n    handleAdd() {\r\n      this.modal1 = true;\r\n      this.itemId = 0;\r\n      this.$refs.form.resetFields();\r\n    },\r\n    handleEdit(item) {\r\n      this.modal1 = true;\r\n      this.itemId = item.id;\r\n    },\r\n    handleSubmit() {\r\n      const checkArr = this.$refs.tree.getCheckedNodes();\r\n      const checkId = checkArr.map(item => item.id);\r\n      // if(!checkId.length){\r\n      //   this.$Message.warning('请勾选角色权限');\r\n      //   return\r\n      // }\r\n      if (this.itemId) {\r\n        this.$post(\"role/edit\", {\r\n          id: this.itemId,\r\n          role_name: this.formData.role_name,\r\n          url_ids: checkId.join()\r\n        }).then(res => {\r\n          this.modal1 = false;\r\n          this.handleSearch();\r\n          this.$post(\"admin/detail\", {}).then(res => {\r\n            this.$store.dispatch(\"setUserInfoAction\", res.data);\r\n          });\r\n        });\r\n      } else {\r\n        this.$post(\"role/add\", {\r\n          role_name: this.formData.role_name,\r\n          url_ids: checkId.join()\r\n        }).then(res => {\r\n          this.modal1 = false;\r\n          this.handleSearch();\r\n        });\r\n      }\r\n    },\r\n    handleExport() {\r\n      this.$Modal.confirm({\r\n        title: \"温馨提示\",\r\n        content: \"确定导出数据 ?\",\r\n        onOk: () => {\r\n          this.$post(\"profit/list\", {\r\n            ...this.params,\r\n            export: 1\r\n          }).then(res => {\r\n            window.location.href = res.data.filename;\r\n          });\r\n        },\r\n        onCancel: () => {}\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/pages/4_finance/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"dt-search-top\"},[_c('h2',[_vm._v(\"分润金额： \"+_vm._s(_vm.sum))])]),_vm._v(\" \"),_c('div',{staticClass:\"dt-search-top\"},[_c('div',{staticClass:\"dt-search-cells\"},[_c('div',{staticClass:\"dt-search-cell\"},[_c('Input',{staticClass:\"dt-search-input\",staticStyle:{\"width\":\"350px\"},attrs:{\"placeholder\":\"分润单号、代理商姓名、代理商账号、代理商手机\"},model:{value:(_vm.params.keyword),callback:function ($$v) {_vm.$set(_vm.params, \"keyword\", $$v)},expression:\"params.keyword\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dt-search-cell\"},[_vm._v(\"\\n        分润来源：\\n        \"),_c('dt-select',{staticClass:\"dt-search-select\",attrs:{\"url\":\"financeSource\"},model:{value:(_vm.params.source),callback:function ($$v) {_vm.$set(_vm.params, \"source\", $$v)},expression:\"params.source\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dt-search-cell\"},[_vm._v(\"\\n        等级：\\n        \"),_c('dt-select',{staticClass:\"dt-search-select\",attrs:{\"url\":\"userLevel\"},model:{value:(_vm.params.agent_level),callback:function ($$v) {_vm.$set(_vm.params, \"agent_level\", $$v)},expression:\"params.agent_level\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dt-search-cell\"},[_vm._v(\"\\n        分润时间：\\n        \"),_c('dt-selectDate',{staticClass:\"dt-search-date\",on:{\"on-select\":_vm.handleDateSelect}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"dt-search-operation\"},[_c('Button',{attrs:{\"type\":\"ghost\"},on:{\"click\":_vm.handleSearch}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.handleExport}},[_vm._v(\"导出\")])],1)]),_vm._v(\" \"),_c('dt-table',{ref:\"table\",attrs:{\"url\":\"profit/list\",\"params\":_vm.params,\"columns\":_vm.columns}}),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":_vm.modelTitle,\"mask-closable\":false},model:{value:(_vm.modal1),callback:function ($$v) {_vm.modal1=$$v},expression:\"modal1\"}},[_c('Form',{ref:\"form\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rule,\"label-width\":100}},[_c('FormItem',{attrs:{\"label\":\"角色名称\",\"prop\":\"role_name\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入角色名称\",\"maxlength\":10},model:{value:(_vm.formData.role_name),callback:function ($$v) {_vm.$set(_vm.formData, \"role_name\", $$v)},expression:\"formData.role_name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"角色权限\",\"prop\":\"form2\"}},[_c('div',{staticStyle:{\"height\":\"300px\",\"overflow-y\":\"auto\",\"border\":\"1px solid #dddee1\"}},[_c('Tree',{ref:\"tree\",attrs:{\"data\":_vm.menuList,\"show-checkbox\":\"\"}})],1)])],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"ghost\"},on:{\"click\":function($event){_vm.handleSubmit()}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.modal1 = false}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3b9e6d40\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/4_finance/list.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/.13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.7.3@vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3b9e6d40\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.7.3@vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/4_finance/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}