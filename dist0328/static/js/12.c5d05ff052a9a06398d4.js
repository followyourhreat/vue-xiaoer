webpackJsonp([12],{EJDE:function(t,a){},YabK:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("34v0"),n=e.n(s),r={data:function(){var t=this;return{btn:["ghost","default","default"],params:{by_admin:"2",keyword:"",status:2,points:""},columns:[{title:"工单号",key:"num"},{title:"工单主题",key:"topic"},{title:"工单内容",key:"content"},{title:"代理商",key:"agent_realname",width:200,render:function(t,a){return t("span",{},a.row.agent_realname+"/"+a.row.agent_phone)}},{title:"评分",key:"points",width:100,render:function(a,e){return a("span",{},1==t.params.status?e.row.points:"-")}},{title:"发起人",key:"sponsor_realname",width:200,render:function(t,a){return t("span",{},a.row.sponsor_realname+"/"+a.row.sponsor_phone)}},{title:"发起时间",key:"ctime",width:200,render:function(t,a){return t("span",{},new Date(1e3*a.row.ctime).Format("yyyy-MM-dd hh:mm"))}},{title:"操作",width:150,key:"operation",render:function(a,e){return a("div",[a("span",{class:"span-active",on:{click:function(){t.handleEdit(e.row)}}},{2:"审批",3:"详情",1:"详情"}[t.params.status])])}}],itemId:0,modal1:!1,formData:{num:"",sponsor_realname:"",sponsor_phone:"",content:"",images:[],reason:"",nodes:[]},rule:{}}},computed:{modelTitle:function(){return this.itemId,"审批流程"}},mounted:function(){},methods:{handleBtn:function(t){this.btn=["default","default","default"],this.btn[t]="ghost",0==t&&(this.params=n()({},this.params,{status:2})),1==t&&(this.params=n()({},this.params,{status:3})),2==t&&(this.params=n()({},this.params,{status:1}))},handleAdd:function(){this.modal1=!0,this.itemId=0,this.$refs.form.resetFields()},handleEdit:function(t){var a=this;this.modal1=!0,this.itemId=t.id,this.$post("order/detail",{id:"8"}).then(function(t){a.formData=t.data,a.formData.images=t.data.images.split(",")})},handleSubmit:function(t){var a=this;this.itemId,this.$post("order/approve",{id:this.itemId,reason:this.formData.reason,is_ok:t}).then(function(t){a.modal1=!1,a.handleSearch()})}}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"dt-search-top"},[e("ButtonGroup",[e("Button",{attrs:{type:t.btn[0]},on:{click:function(a){t.handleBtn(0)}}},[t._v("待处理")]),t._v(" "),e("Button",{attrs:{type:t.btn[1]},on:{click:function(a){t.handleBtn(1)}}},[t._v("处理中")]),t._v(" "),e("Button",{attrs:{type:t.btn[2]},on:{click:function(a){t.handleBtn(2)}}},[t._v("已完成")])],1)],1),t._v(" "),e("div",{staticClass:"dt-search-top"},[e("div",{staticClass:"dt-search-cells"},[e("div",{staticClass:"dt-search-cell"},[e("Input",{staticClass:"dt-search-input",staticStyle:{width:"350px"},attrs:{placeholder:"工单号、工单主题、工单内容、代理商、发起人"},model:{value:t.params.keyword,callback:function(a){t.$set(t.params,"keyword",a)},expression:"params.keyword"}})],1),t._v(" "),1==t.params.status?e("div",{staticClass:"dt-search-cell"},[t._v("\n        评分小于："),e("Input",{staticClass:"dt-search-input",attrs:{placeholder:"评分值"},model:{value:t.params.points,callback:function(a){t.$set(t.params,"points",a)},expression:"params.points"}})],1):t._e()]),t._v(" "),e("div",{staticClass:"dt-search-operation"},[e("Button",{attrs:{type:"ghost"},on:{click:t.handleSearch}},[t._v("查询")])],1)]),t._v(" "),e("dt-table",{ref:"table",attrs:{url:"order/list",params:t.params,columns:t.columns}}),t._v(" "),e("Modal",{attrs:{title:"审批流程","mask-closable":!1,width:"650"},model:{value:t.modal1,callback:function(a){t.modal1=a},expression:"modal1"}},[e("Row",{attrs:{gutter:40}},[e("Col",{attrs:{span:"14"}},[e("Form",{ref:"form",attrs:{model:t.formData,rules:t.rule,"label-width":100}},[e("FormItem",{attrs:{label:"工单号"}},[t._v("\n            "+t._s(t.formData.num)+"\n          ")]),t._v(" "),e("FormItem",{attrs:{label:"流程发起人"}},[t._v("\n            "+t._s(t.formData.sponsor_realname)+"\n          ")]),t._v(" "),e("FormItem",{attrs:{label:"发起人电话"}},[t._v("\n            "+t._s(t.formData.sponsor_phone)+"\n          ")]),t._v(" "),e("FormItem",{attrs:{label:"工单内容"}},[e("p",[t._v(t._s(t.formData.content))]),t._v(" "),t._l(t.formData.images,function(t,a){return e("img",{key:a,attrs:{src:t,width:"60",height:"60"}})})],2),t._v(" "),e("FormItem",{attrs:{label:"要求处理时长"}},[t._v("\n            "+t._s(t.formData.handle_duration)+"\n          ")]),t._v(" "),"2"==t.params.status?e("FormItem",{attrs:{label:"审批理由"}},[e("Input",{attrs:{type:"textarea",placeholder:"请输入审批理由"},model:{value:t.formData.reason,callback:function(a){t.$set(t.formData,"reason",a)},expression:"formData.reason"}})],1):t._e()],1)],1),t._v(" "),e("Col",{attrs:{span:"10"}},t._l(t.formData.nodes,function(a,s){return e("TimelineItem",{key:s},[e("div",{staticClass:"timeLine"},[e("div",[e("p",[t._v(t._s(a.real_handler_realname)+"\n                "),"0"==a.is_ok?e("span",{staticStyle:{color:"#2DB7F5","padding-left":"5px"}},[t._v("未处理")]):t._e(),t._v(" "),"1"==a.is_ok?e("span",{staticStyle:{color:"#19BE6B","padding-left":"5px"}},[t._v("同意")]):t._e(),t._v(" "),"2"==a.is_ok?e("span",{staticStyle:{color:"#ED3F14","padding-left":"5px"}},[t._v("拒绝")]):t._e()]),t._v(" "),e("p",[t._v("要求时长："+t._s(a.handle_duration))]),t._v(" "),e("p",[t._v("延期："+t._s(a.delay))])]),t._v(" "),e("div",[e("p",[t._v(t._s(new Date(1e3*a.handle_time).Format("yyyy-MM-dd hh:mm")))]),t._v(" "),e("p",[t._v("实际时长："+t._s(a.real_handle_duration))])])])])}))],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},["2"==t.params.status?e("Button",{attrs:{type:"ghost"},on:{click:function(a){t.handleSubmit(1)}}},[t._v("通过")]):t._e(),t._v(" "),"2"==t.params.status?e("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(a){t.handleSubmit(2)}}},[t._v("终止")]):t._e(),t._v(" "),"2"!=t.params.status?e("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(a){t.modal1=!1}}},[t._v("取消")]):t._e()],1)],1)],1)},staticRenderFns:[]};var i=e("Mz/3")(r,o,!1,function(t){e("EJDE")},"data-v-4197cbc8",null);a.default=i.exports}});
//# sourceMappingURL=12.c5d05ff052a9a06398d4.js.map