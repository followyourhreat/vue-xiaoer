webpackJsonp([16],{"+znG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Edqs"),r=a.n(o),s={data:function(){return{params:{by_admin:"1",keyword:""},columns:[{title:"工单号",key:"num"},{title:"工单主题",key:"topic"},{title:"工单内容",key:"content"},{title:"代理商",key:"agent_realname",width:200,render:function(t,e){return t("span",{},e.row.agent_realname+"/"+e.row.agent_phone)}},{title:"发起人",key:"sponsor_realname",width:200,render:function(t,e){return t("span",{},e.row.sponsor_realname+"/"+e.row.sponsor_phone)}},{title:"发起时间",key:"ctime",width:200,render:function(t,e){return t("span",{},new Date(1e3*e.row.ctime).Format("yyyy-MM-dd hh:mm"))}}],itemId:0,modal1:!1,flowList:[],formData:{flow_id:"",topic:"",content:"",code:["北京市","市辖区","东城区"],address:"",sponsor_realname:"",sponsor_phone:""},rule:{}}},computed:{modelTitle:function(){return this.itemId?"编辑":"新增"}},mounted:function(){this.getFlowList()},methods:{getFlowList:function(){var t=this;this.$post("flow/list",{page:0}).then(function(e){t.flowList=e.data.list})},selectChangeModal:function(t){var e=this.flowList.filter(function(e){return e.id==t});console.log(e),this.formData.descr=e[0].descr},areaChangeModal:function(t){1==t.length&&(this.formData.province=t[0]),2==t.length&&(this.formData.province=t[0],this.formData.city=t[1]),3==t.length&&(this.formData.province=t[0],this.formData.city=t[1],this.formData.district=t[2])},handleAdd:function(){this.modal1=!0,this.itemId=0,this.$refs.form.resetFields(),this.$refs.code.isInit=!0,this.formData.code=["北京市","市辖区","东城区"]},handleEdit:function(t){this.modal1=!0,this.itemId=t.id},handleSubmit:function(){var t=this,e={};this.itemId,e=r()({},this.formData),this.$post("order/add",e).then(function(e){t.modal1=!1,t.handleSearch()})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"dt-search-top"},[a("div",{staticClass:"dt-search-cells"},[a("div",{staticClass:"dt-search-cell"},[a("Input",{staticClass:"dt-search-input",staticStyle:{width:"350px"},attrs:{placeholder:"工单号、工单主题、工单内容、代理商、发起人"},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}})],1)]),t._v(" "),a("div",{staticClass:"dt-search-operation"},[a("Button",{attrs:{type:"ghost"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"success"},on:{click:t.handleAdd}},[t._v("录入")])],1)]),t._v(" "),a("dt-table",{ref:"table",attrs:{url:"order/list",params:t.params,columns:t.columns}}),t._v(" "),a("Modal",{attrs:{title:"录入","mask-closable":!1},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"form",attrs:{model:t.formData,rules:t.rule,"label-width":100}},[a("FormItem",{attrs:{label:"流程名称",prop:"flow_id"}},[a("Select",{on:{"on-change":t.selectChangeModal},model:{value:t.formData.flow_id,callback:function(e){t.$set(t.formData,"flow_id",e)},expression:"formData.flow_id"}},t._l(t.flowList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"流程描述"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入流程描述",disabled:""},model:{value:t.formData.descr,callback:function(e){t.$set(t.formData,"descr",e)},expression:"formData.descr"}})],1),t._v(" "),a("FormItem",{attrs:{label:"主题",prop:"topic"}},[a("Input",{attrs:{placeholder:"请输入主题"},model:{value:t.formData.topic,callback:function(e){t.$set(t.formData,"topic",e)},expression:"formData.topic"}})],1),t._v(" "),a("FormItem",{attrs:{label:"内容",prop:"content"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),t._v(" "),a("FormItem",{attrs:{label:"省市区",prop:"code"}},[a("al-selector",{ref:"code",staticStyle:{display:"flow-root"},attrs:{"data-type":"name",level:"2"},on:{"on-change":t.areaChangeModal},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),t._v(" "),a("FormItem",{attrs:{label:"详细地址",prop:"address"}},[a("Input",{attrs:{placeholder:"请输入详细地址"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}})],1),t._v(" "),a("FormItem",{attrs:{label:"客户名称",prop:"sponsor_realname"}},[a("Input",{attrs:{placeholder:"请输入客户名称"},model:{value:t.formData.sponsor_realname,callback:function(e){t.$set(t.formData,"sponsor_realname",e)},expression:"formData.sponsor_realname"}})],1),t._v(" "),a("FormItem",{attrs:{label:"联系电话",prop:"sponsor_phone"}},[a("Input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.formData.sponsor_phone,callback:function(e){t.$set(t.formData,"sponsor_phone",e)},expression:"formData.sponsor_phone"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.handleSubmit()}}},[t._v("保存")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){t.modal1=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]},l=a("Mz/3")(s,n,!1,null,null,null);e.default=l.exports}});
//# sourceMappingURL=16.cef85035ca08ac1200b0.js.map