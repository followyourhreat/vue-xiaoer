webpackJsonp([0],{vMPN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"dt-search-top"},[a("div",{staticClass:"dt-search-cells"},[a("div",{staticClass:"dt-search-cell"},[a("Input",{staticClass:"dt-search-input",staticStyle:{width:"350px"},attrs:{placeholder:"角色名称"},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}})],1)]),t._v(" "),a("div",{staticClass:"dt-search-operation"},[a("Button",{attrs:{type:"ghost"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"success"},on:{click:t.handleAdd}},[t._v("新增")])],1)]),t._v(" "),a("dt-table",{ref:"table",attrs:{url:"role/list",params:t.params,columns:t.columns}}),t._v(" "),a("Modal",{attrs:{title:t.modelTitle,"mask-closable":!1},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"form",attrs:{model:t.formData,rules:t.rule,"label-width":100}},[a("FormItem",{attrs:{label:"角色名称",prop:"role_name"}},[a("Input",{attrs:{placeholder:"请输入角色名称",maxlength:10},model:{value:t.formData.role_name,callback:function(e){t.$set(t.formData,"role_name",e)},expression:"formData.role_name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"角色权限",prop:"form2"}},[a("div",{staticStyle:{height:"300px","overflow-y":"auto",border:"1px solid #dddee1"}},[a("Tree",{ref:"tree",attrs:{data:t.menuList,"show-checkbox":""}})],1)])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.handleSubmit()}}},[t._v("保存")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){t.modal1=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]},i=a("Mz/3")({data:function(){var t=this;return{params:{keyword:""},columns:[{title:"角色名称",key:"role_name",width:200},{title:"角色权限",key:"url_names"},{title:"操作",width:150,key:"operation",render:function(e,a){return e("div",[e("span",{class:"span-active",on:{click:function(){t.handleEdit(a.row)}}},"编辑"),e("span",{class:"span-del",on:{click:function(){t.handleRemove("role/del",{id:a.row.id})}}},"删除")])}}],itemId:0,modal1:!1,formData:{role_name:""},rule:{},menuList:[]}},computed:{modelTitle:function(){return this.itemId?"编辑":"新增"}},mounted:function(){},methods:{getMenuList:function(){var t=this;this.$post("menu/usermenu",{}).then(function(e){var a=e.data;a.forEach(function(t){t.title=t.menu_name,t.child&&(t.children=t.child,t.children.forEach(function(t){t.title=t.menu_name}))}),t.menuList=a})},handleAdd:function(){this.modal1=!0,this.itemId=0,this.menuList=[],this.$refs.form.resetFields(),this.getMenuList()},handleEdit:function(t){var e=this;this.modal1=!0,this.itemId=t.id,this.menuList=[],this.$post("role/detail",{id:t.id}).then(function(t){var a=t.data;e.formData.role_name=a.role_name;var n=a.menus_tree;n.forEach(function(t){t.title=t.menu_name,t.child&&(t.children=t.child,t.children.forEach(function(t){t.title=t.menu_name}))}),e.menuList=n})},handleSubmit:function(){var t=this,e=this.$refs.tree.getCheckedNodes().map(function(t){return t.id});this.itemId?this.$post("role/edit",{id:this.itemId,role_name:this.formData.role_name,url_ids:e.join()}).then(function(e){t.modal1=!1,t.handleSearch(),t.$post("admin/detail",{}).then(function(e){t.$store.dispatch("setUserInfoAction",e.data)})}):this.$post("role/add",{role_name:this.formData.role_name,url_ids:e.join()}).then(function(e){t.modal1=!1,t.handleSearch()})}}},n,!1,null,null,null);e.default=i.exports}});
//# sourceMappingURL=0.249b570284c7fb0c94d3.js.map